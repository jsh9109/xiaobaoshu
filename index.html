<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ç¤¾ä¼šåŒ–ç¨‹åº¦æµ‹è¯• - 2025æ·±åº¦ç‰ˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* ================= è§†è§‰ç³»ç»Ÿï¼šé«˜ç«¯çŸ¥è¯†ä»˜è´¹é£ ================= */
        :root {
            --primary: #8B6E4E;       /* ä¸»è‰² */
            --primary-light: #A07F56; 
            --bg-body: #F9F3EB;       /* èƒŒæ™¯ */
            --bg-card: #FFFFFF;       
            --red-price: #D35400;     
            --green-success: #2E7D32; 
            --border-gold: #E2C08D;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Helvetica Neue', sans-serif;
            background: var(--bg-body);
            color: #333;
            line-height: 1.6;
            padding: 15px;
            min-height: 100vh;
        }
        .container { max-width: 600px; margin: 0 auto; padding-bottom: 80px; }
        .hidden { display: none !important; }

        /* é€šç”¨å¡ç‰‡ */
        .card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 8px 30px rgba(139, 110, 78, 0.06);
            margin-bottom: 20px;
        }

        /* æŒ‰é’®ä½“ç³» */
        .btn-primary {
            width: 100%; padding: 16px; border: none; border-radius: 50px;
            background: linear-gradient(135deg, #8B6E4E 0%, #6D5438 100%);
            color: white; font-size: 1.1em; font-weight: bold; cursor: pointer;
            box-shadow: 0 6px 15px rgba(139, 110, 78, 0.3); transition: transform 0.1s;
            text-align: center; display: block;
        }
        .btn-primary:active { transform: scale(0.98); }

        /* ================= é¦–é¡µæ ·å¼ ================= */
        .header { text-align: center; margin-bottom: 25px; }
        .header h1 { color: var(--primary); font-size: 1.8em; margin-bottom: 8px; font-weight: 800; display: flex; align-items: center; justify-content: center; gap: 8px;}
        .header p { color: #888; font-size: 0.9em; margin-bottom: 8px; }
        .tag-pill { background: var(--primary); color: #fff; padding: 4px 15px; border-radius: 20px; font-size: 0.75em; display: inline-block; }

        /* ç»´åº¦å±•ç¤ºæ ¼ */
        .dimensions-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin: 25px 0;
        }
        .dim-card {
            background: #FFFBF5; border: 1px solid #F0E6D8; border-radius: 12px; padding: 20px 10px; text-align: center;
            transition: all 0.3s;
        }
        .dim-icon { font-size: 2.2em; margin-bottom: 8px; display: block; }
        .dim-name { font-weight: bold; color: var(--primary); font-size: 1em; margin-bottom: 4px; display: block; }
        .dim-desc { font-size: 0.75em; color: #999; }

        /* æµ‹è¯„æƒç›Šæ¡† */
        .feature-box {
            background: linear-gradient(180deg, #FFFDF9 0%, #FFF5E6 100%);
            border: 2px solid var(--border-gold);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }
        .feature-title { font-weight: bold; color: #333; font-size: 1.1em; margin-bottom: 15px; display: flex; align-items: center; gap: 8px; }
        .feature-list li {
            list-style: none; margin-bottom: 12px; font-size: 0.95em; color: #555; display: flex; align-items: flex-start;
        }
        .feature-list li::before { content: "âœ…"; margin-right: 10px; font-weight: bold; color: var(--primary); }
        .highlight-text { color: var(--red-price); font-weight: bold; border-bottom: 1px dashed var(--red-price); }

        .input-group input {
            width: 100%; padding: 16px; border: 1px solid #ddd; border-radius: 12px;
            text-align: center; font-size: 1em; background: #FAFAFA; margin-bottom: 15px; outline: none;
        }
        .input-group input:focus { border-color: var(--primary); background: #fff; }

        /* ================= ç­”é¢˜é¡µ ================= */
        .progress-bar { height: 6px; background: #EEE; border-radius: 3px; margin: 10px 0 25px 0; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s; }
        .question-text { font-size: 1.25em; font-weight: bold; margin-bottom: 25px; color: #333; line-height: 1.5; }
        .option {
            padding: 18px; background: #F9F9F9; border: 1px solid #EEE;
            border-radius: 12px; margin-bottom: 12px; cursor: pointer; transition: all 0.2s;
            font-size: 1em; color: #444; font-weight: 500;
        }
        .option.selected { background: var(--primary); color: white; border-color: var(--primary); }
        .nav-buttons { display: flex; gap: 15px; margin-top: 30px; }
        .nav-btn { flex: 1; padding: 14px; border-radius: 10px; border: none; font-size: 1em; cursor: pointer; font-weight: bold; }
        .btn-prev { background: #F5F5F5; color: #999; }
        .btn-next { background: var(--primary); color: white; }

        /* ================= ç»“æœé¡µ (å…è´¹ç‰ˆ) ================= */
        .result-header {
            background: var(--primary); color: white; text-align: center;
            padding: 35px 20px; border-radius: 16px 16px 0 0; margin: -25px -25px 20px -25px;
        }
        .score-big { font-size: 4.5em; font-weight: 800; line-height: 1; margin: 10px 0; text-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .level-badge { background: rgba(255,255,255,0.2); padding: 6px 20px; border-radius: 20px; font-size: 1em; font-weight: bold; display: inline-block; }

        .persona-card {
            background: #FFF9F0; border-left: 5px solid var(--primary); padding: 20px; 
            border-radius: 8px; margin-top: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.02);
        }
        .persona-title { color: var(--primary); font-weight: bold; font-size: 1.1em; margin-bottom: 8px; display: flex; align-items: center; gap: 5px;}
        .persona-text { font-size: 1em; color: #555; line-height: 1.6; }

        .advice-section { margin-top: 30px; }
        .section-title { 
            font-size: 1.1em; font-weight: bold; color: #333; margin-bottom: 15px; 
            border-left: 4px solid #D35400; padding-left: 10px; 
        }
        .advice-card {
            background: white; border: 1px solid #EEE; border-radius: 10px; padding: 15px; margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.02);
        }
        .advice-card.strength { border-top: 3px solid #2E7D32; background: #F6FFF6; }
        .advice-card.weakness { border-top: 3px solid #C62828; background: #FFF5F5; }
        .advice-tag {
            display: inline-block; font-size: 0.85em; font-weight: bold; padding: 2px 8px; border-radius: 4px; margin-right: 5px; margin-bottom: 8px;
        }
        .tag-green { background: #E8F5E9; color: #2E7D32; }
        .tag-red { background: #FFEBEE; color: #C62828; }
        .advice-text { font-size: 0.95em; color: #444; line-height: 1.6; text-align: justify; }
        .advice-highlight { font-weight: bold; color: #000; }
        .conclusion-box {
            background: #FFF8E1; padding: 15px; border-radius: 8px; color: #795548; font-size: 0.9em; line-height: 1.6;
            border-left: 3px solid #FFC107; margin-top: 10px;
        }

        /* ç›®å½•å›¾å®¹å™¨ */
        .catalog-container {
            margin-top: 35px; border: 2px dashed #E2C08D; border-radius: 12px; padding: 12px; background: #FFFCF5; position: relative; text-align: center;
        }
        .catalog-tag {
            position: absolute; top: -14px; left: 50%; transform: translateX(-50%);
            background: var(--primary); color: white; padding: 5px 25px; border-radius: 20px; font-size: 0.9em; font-weight: bold;
        }
        .catalog-img { width: 100%; border-radius: 8px; margin-top: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }

        /* é”å®šåŒºåŸŸ */
        .locked-area { 
            position: relative; border: 1px solid #EEE; border-radius: 12px; overflow: hidden; margin-top: 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.04);
        }
        .locked-header { 
            background: #F8F8F8; padding: 15px; font-weight: bold; color: #333; display: flex; justify-content: space-between; border-bottom: 1px solid #EEE;
        }
        .blur-text { 
            padding: 25px; filter: blur(6px); opacity: 0.6; user-select: none; background: white; font-size: 1em; line-height: 2;
        }
        .unlock-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 10;
        }
        .unlock-btn {
            background: linear-gradient(135deg, #D35400 0%, #E67E22 100%); 
            color: white; border: none; padding: 14px 40px; border-radius: 40px; font-weight: bold; 
            box-shadow: 0 8px 25px rgba(211, 84, 0, 0.4); animation: pulse 2s infinite; font-size: 1.1em; cursor: pointer;
        }

        /* æ”¯ä»˜åŒº (å›¾4å¤åˆ»ç‰ˆ) */
        .pay-card-new {
            background: #FFF; border-radius: 15px; padding: 30px 20px; margin-top: 30px; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.08); border: 1px solid #FFF3E0;
        }
        .pay-price-box { text-align: center; margin-bottom: 25px; }
        .price-val { font-size: 3.5em; font-weight: 800; color: #D35400; line-height: 1; }
        .price-sub { font-size: 0.85em; color: #888; margin-top: 8px; }
        
        .pay-method-title { text-align: center; color: #E65100; font-weight: bold; margin-bottom: 15px; display: flex; align-items: center; justify-content: center; gap: 8px; }
        
        /* å¿«æ·æŒ‰é’® */
        .quick-pay-btn {
            width: 100%; padding: 12px; margin-bottom: 10px; border-radius: 8px; border: none;
            color: white; font-weight: bold; font-size: 1.05em; display: flex; align-items: center; justify-content: center; gap: 8px; cursor: pointer;
        }
        .btn-ali { background: #00A0E9; }
        .btn-wx { background: #07C160; }
        
        .pay-divider { display: flex; align-items: center; color: #CCC; margin: 20px 0; font-size: 0.9em; }
        .pay-divider::before, .pay-divider::after { content: ""; flex: 1; height: 1px; background: #EEE; }
        .pay-divider span { padding: 0 10px; }

        /* æ‰«ç åŒº */
        .qr-section { text-align: center; }
        .qr-flex { display: flex; justify-content: center; gap: 15px; margin-top: 15px; }
        .qr-item-new { background: white; border: 1px solid #EEE; border-radius: 8px; padding: 10px; width: 140px; }
        .qr-head { color: white; padding: 4px; border-radius: 4px 4px 0 0; font-size: 0.8em; margin: -10px -10px 10px -10px; }
        .head-wx { background: #07C160; }
        .head-ali { background: #00A0E9; }
        .qr-img-new { width: 100%; display: block; }
        .scan-tip { background: #F9F9F9; color: #666; font-size: 0.85em; padding: 8px; border-radius: 4px; margin-top: 15px; }

        /* å¤åˆ¶è½¬è´¦ */
        .copy-row { display: flex; justify-content: space-between; align-items: center; background: #F5F5F5; padding: 12px 15px; border-radius: 8px; margin-bottom: 10px; }
        .copy-txt { color: #333; font-weight: 500; font-size: 0.95em; }
        .btn-copy-brown { background: #8D6E63; color: white; border: none; padding: 6px 15px; border-radius: 4px; font-size: 0.85em; cursor: pointer; }

        /* ä¸Šä¼ å¤§æŒ‰é’® */
        .upload-btn-lg {
            background: linear-gradient(180deg, #E65100 0%, #BF360C 100%);
            color: white; width: 100%; padding: 16px; border-radius: 10px; font-size: 1.1em; font-weight: bold;
            text-align: center; border: none; margin-top: 25px; display: flex; align-items: center; justify-content: center; gap: 8px;
            box-shadow: 0 4px 0 #870000; cursor: pointer;
        }
        .upload-btn-lg:active { transform: translateY(2px); box-shadow: 0 2px 0 #870000; }

        /* å®‰å…¨åº•æ  */
        .safe-footer { background: #E3F2FD; color: #1976D2; text-align: center; font-size: 0.85em; padding: 12px; border-radius: 8px; margin-top: 20px; display: flex; align-items: center; justify-content: center; gap: 5px; }

        /* ================= æˆåŠŸé¡µ (ä¿æŒ) ================= */
        .success-header { text-align: center; padding: 30px 0; border-bottom: 1px dashed #DDD; }
        .delivery-card { background: #E8F5E9; border: 2px solid #2E7D32; border-radius: 16px; padding: 25px 20px; margin: 25px 0; }
        .delivery-title { text-align: center; color: #2E7D32; font-weight: 800; font-size: 1.3em; margin-bottom: 20px; }
        .steps-row { display: flex; justify-content: space-between; margin-bottom: 25px; text-align: center; font-size: 0.9em; color: #555; }
        .step-item { position: relative; flex: 1; }
        .step-num { width: 30px; height: 30px; line-height: 30px; background: #2E7D32; color: white; border-radius: 50%; margin: 0 auto 8px auto; font-weight: bold; }
        .step-arrow { position: absolute; right: -15px; top: 8px; color: #BDBDBD; font-size: 1.2em; }
        .link-info-box { background: white; border-radius: 10px; padding: 15px; margin-bottom: 20px; }
        .link-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .link-label { color: #666; font-size: 0.9em; }
        .link-val { font-family: monospace; font-weight: bold; color: #333; background: #F5F5F5; padding: 4px 8px; border-radius: 4px; max-width: 180px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}
        .code-val { font-size: 1.4em; color: #D35400; letter-spacing: 2px; }
        .btn-copy-big { width: 100%; padding: 15px; background: #2E7D32; color: white; border: none; border-radius: 50px; font-size: 1.2em; font-weight: bold; cursor: pointer; box-shadow: 0 4px 15px rgba(46, 125, 50, 0.3); display: flex; align-items: center; justify-content: center; gap: 10px; transition: all 0.2s; }
        .no-app-tip { margin-top: 15px; background: #FFF8E1; border: 1px dashed #FFB74D; border-radius: 10px; padding: 12px; text-align: center; }
        .tip-title { color: #F57C00; font-weight: bold; font-size: 0.9em; margin-bottom: 5px; }
        .tip-steps { font-size: 0.85em; color: #5D4037; display: flex; flex-direction: column; gap: 4px; }
        .report-module { background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.04); border-top: 4px solid var(--primary); }
        .module-title { font-size: 1.1em; font-weight: bold; color: var(--primary); margin-bottom: 15px; display: flex; align-items: center; gap: 8px; }
        .dim-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .dim-bar { height: 8px; background: #F0F0F0; border-radius: 4px; overflow: hidden; margin-bottom: 15px; }
        .dim-fill { height: 100%; background: var(--primary-light); border-radius: 4px; }
        .dim-text { font-size: 0.9em; color: #666; background: #F9F9F9; padding: 10px; border-radius: 6px; line-height: 1.6; text-align: justify; }
        .guide-list li { margin-bottom: 15px; font-size: 0.95em; color: #444; line-height: 1.6; }
        .guide-book { display: inline-block; background: #FFF3E0; color: #E65100; padding: 2px 6px; border-radius: 4px; font-size: 0.85em; font-weight: bold; margin-right: 5px; }
        .pitfall-card { background: #FFEBEE; border-radius: 8px; padding: 15px; margin-top: 10px; border-left: 4px solid #C62828; }
        .pitfall-head { color: #C62828; font-weight: bold; margin-bottom: 5px; font-size: 0.95em; }
        .pitfall-body { color: #5D4037; font-size: 0.9em; }
        .cs-footer { text-align: center; margin-top: 40px; color: #999; font-size: 0.9em; padding-top: 20px; border-top: 1px solid #EEE; }
        .wx-id { color: #333; font-weight: bold; background: #EEE; padding: 2px 8px; border-radius: 4px; user-select: text; }

        @keyframes pulse { 0% {transform: scale(1);} 50% {transform: scale(1.05);} 100% {transform: scale(1);} }
    </style>
</head>
<body>

<div class="container">

    <div id="homePage" class="card">
        <div class="header">
            <h1>â­ ç¤¾ä¼šåŒ–ç¨‹åº¦æµ‹è¯•</h1>
            <p>2025æ–°ç‰ˆ Â· 0-100åˆ†åˆ¶ Â· ç²¾å‡†è¯„ä¼°</p>
            <div class="tag-pill">åŸºäº100ä¸‡å­—ç¤¾äº¤å®æˆ˜æ‰‹å†Œ</div>
        </div>

        <div class="dimensions-grid">
            <div class="dim-card"><span class="dim-icon">ğŸ‘ï¸</span><span class="dim-name">äººæƒ…æ´å¯Ÿ</span><span class="dim-desc">è¯†åˆ«æ½œè§„åˆ™</span></div>
            <div class="dim-card"><span class="dim-icon">ğŸ¯</span><span class="dim-name">è¾¹ç•ŒæŒæ§</span><span class="dim-desc">æ°å½“åˆ†å¯¸æ„Ÿ</span></div>
            <div class="dim-card"><span class="dim-icon">âš–ï¸</span><span class="dim-name">åˆ©ç›Šå¹³è¡¡</span><span class="dim-desc">äººæƒ…å¾€æ¥æ™ºæ…§</span></div>
            <div class="dim-card"><span class="dim-icon">ğŸ­</span><span class="dim-name">æƒ…ç»ªç®¡ç†</span><span class="dim-desc">å¤æ‚åœºæ™¯æ§åˆ¶</span></div>
        </div>

        <div class="feature-box">
            <div class="feature-title">ğŸ“‹ æµ‹è¯„åŒ…å«ä¸“ä¸šæœåŠ¡</div>
            <ul class="feature-list">
                <li>40é¢˜ä¸“ä¸šå¿ƒç†å­¦é‡è¡¨è¯„ä¼°</li>
                <li>4å¤§æ ¸å¿ƒç»´åº¦ç²¾å‡†é›·è¾¾å›¾</li>
                <li>ç¤¾ä¼šåŒ–ç¨‹åº¦ç­‰çº§è¯„å®š</li>
                <li><span class="highlight-text">è§£é”å®Œæ•´ã€Šç¤¾ä¼šåŒ–æ‰‹å†Œã€‹100ä¸‡å­—+6å¤§æ¿å— (é™æ—¶Â¥19.9)</span></li>
            </ul>
        </div>

        <div class="input-group">
            <input type="text" id="cardInput" placeholder="è¯·è¾“å…¥æµ‹è¯„å¡å· (ä¸åŒºåˆ†å¤§å°å†™)">
        </div>
        <button class="btn-primary" onclick="startTest()">å¼€å§‹æµ‹è¯„</button>
        <div id="homeError" style="color:red; font-size:0.9em; text-align:center; margin-top:10px; display:none;"></div>
        
        <div style="text-align:center; margin-top:20px; font-size:0.8em; color:#ccc; cursor:pointer;" onclick="showAdmin()">ç®¡ç†å‘˜å…¥å£ -></div>
    </div>

    <div id="testPage" class="card hidden">
        <div style="display:flex; justify-content:space-between; color:#999; font-size:0.9em; margin-bottom:5px;">
            <span id="progressText">è¿›åº¦ 1/40</span>
            <span>å•é€‰</span>
        </div>
        <div class="progress-bar"><div class="progress-fill" id="progressBar"></div></div>
        <div class="question-text" id="qText">é¢˜ç›®åŠ è½½ä¸­...</div>
        <div id="optionsBox"></div>
        <div class="nav-buttons">
            <button class="nav-btn btn-prev" onclick="prevQ()" id="prevBtn" style="visibility:hidden">ä¸Šä¸€é¢˜</button>
            <button class="nav-btn btn-next" onclick="nextQ()">ä¸‹ä¸€é¢˜</button>
        </div>
    </div>

    <div id="resultPage" class="card hidden" style="padding:0;">
        <div class="result-header">
            <div style="opacity:0.9; font-size:0.9em;">ä½ çš„åŸºç¡€è¯„ä¼°ç»“æœ</div>
            <div class="score-big" id="simpleScore">--</div>
            <div class="level-badge" id="simpleLevel">è¯„ä¼°ä¸­</div>
        </div>

        <div style="padding: 0 25px 25px 25px;">
            <div style="height:260px; position:relative; width:100%;">
                <canvas id="radarChart"></canvas>
            </div>

            <div class="persona-card">
                <div class="persona-title">ğŸ·ï¸ æ‚¨çš„ç¤¾äº¤ç”»åƒ</div>
                <div id="personaText" class="persona-text">åˆ†æä¸­...</div>
            </div>

            <div class="advice-section">
                <div class="section-title">ğŸ’¡ æ·±åº¦è¯„ä¼°æ‘˜è¦</div>
                <div id="detailAdviceContent" class="advice-content"></div>
            </div>

            <div class="catalog-container">
                <div class="catalog-tag">ğŸ“– è§£é”åè·å–ï¼š100ä¸‡å­—å®æˆ˜æ‰‹å†Œ</div>
                <img src="catalog.jpg" alt="æ‰‹å†Œç›®å½•é¢„è§ˆ" class="catalog-img">
            </div>

            <div class="locked-area">
                <div class="locked-header">
                    <span>ğŸ›¡ï¸ [æ·±åº¦] æ ¸å¿ƒç¤¾äº¤å¼±ç‚¹å¤ç›˜</span>
                    <span>ğŸ”’</span>
                </div>
                <div class="blur-text">
                    <p>ã€é«˜å±é¢„è­¦ã€‘æ ¹æ®æµ‹è¯„æ•°æ®ï¼Œæ‚¨åœ¨å…³é”®ç»´åº¦å­˜åœ¨æ˜¾è‘—çš„è®¤çŸ¥åå·®...</p>
                    <p>è¿™é€šå¸¸è¡¨ç°ä¸ºï¼šæ— æ³•å‡†ç¡®æ•æ‰ä»–äººçš„æ½œå°è¯...</p>
                    <p>æ ¸å¿ƒåŸå› åˆ†æï¼šæ‚¨çš„ç¤¾äº¤é›·è¾¾åœ¨æ¥æ”¶â€œæƒ…ç»ªä¿¡å·â€æ—¶å­˜åœ¨å±è”½æ•ˆåº”...</p>
                    <p>æ”¹è¿›æ–¹æ¡ˆï¼šå»ºè®®ç«‹å³å­¦ä¹ æ‰‹å†Œç¬¬3ç« çš„â€œä¸‰ç»´å€¾å¬æ³•â€è¿›è¡Œé’ˆå¯¹æ€§è®­ç»ƒ...</p>
                </div>
                <div class="unlock-overlay">
                    <button class="unlock-btn" onclick="scrollToPay()">è§£é”å®Œæ•´æŠ¥å‘Š + æ‰‹å†Œ</button>
                </div>
            </div>

            <div id="paySection" class="pay-card-new">
                <div class="pay-price-box">
                    <div class="price-val">Â¥19.9</div>
                    <div class="price-sub">é™æ—¶ç‰¹æƒ  Â· 100ä¸‡å­—å¹²è´§ Â· ä¸€æ¯å¥¶èŒ¶ä»·æ ¼æ¢ç»ˆèº«å—ç”¨ç¤¾äº¤èƒ½åŠ›</div>
                </div>

                <div class="pay-method-title">ğŸ’³ é€‰æ‹©æ”¯ä»˜æ–¹å¼</div>
                
                <button class="quick-pay-btn btn-ali" onclick="scrollToQR()">âš¡ æ”¯ä»˜å®å¿«æ·æ”¯ä»˜</button>
                <button class="quick-pay-btn btn-wx" onclick="scrollToQR()">âš¡ å¾®ä¿¡å¿«æ·æ”¯ä»˜</button>

                <div class="pay-divider"><span>æˆ–</span></div>

                <div class="qr-section">
                    <div class="pay-method-title" style="color:#333; font-size:1em;">ğŸ“± æ‰«ç æ”¯ä»˜</div>
                    <div class="qr-flex">
                        <div class="qr-item-new">
                            <div class="qr-head head-wx">æ¨èä½¿ç”¨å¾®ä¿¡æ”¯ä»˜</div>
                            <img src="wechat_qrcode.jpg" class="qr-img-new" alt="å¾®ä¿¡æ”¯ä»˜">
                        </div>
                        <div class="qr-item-new">
                            <div class="qr-head head-ali">æ”¯ä»˜å®æ”¯ä»˜</div>
                            <img src="alipay_qrcode.png" class="qr-img-new" alt="æ”¯ä»˜å®">
                        </div>
                    </div>
                    <div class="scan-tip">ğŸ’¡ ä¿å­˜åæ‰“å¼€APP -> æ‰«ä¸€æ‰« -> ç›¸å†Œé€‰æ‹©</div>
                </div>

                <div class="pay-divider"><span>æˆ–</span></div>

                <div class="pay-method-title" style="color:#333; font-size:1em;">ğŸ’³ å¤åˆ¶è´¦å·è½¬è´¦</div>
                
                <div class="copy-row">
                    <span class="copy-txt">jsh9109</span>
                    <button class="btn-copy-brown" onclick="copyTxt('jsh9109')">å¤åˆ¶å¾®ä¿¡</button>
                </div>
                <div class="copy-row">
                    <span class="copy-txt">313360631@qq.com</span>
                    <button class="btn-copy-brown" onclick="copyTxt('313360631@qq.com')">å¤åˆ¶æ”¯ä»˜å®</button>
                </div>

                <label for="fileInput" class="upload-btn-lg">
                    ğŸ“¸ ä¸Šä¼ ä»˜æ¬¾æˆªå›¾ï¼Œç«‹å³è·å–æ‰‹å†Œ
                </label>
                <input type="file" id="fileInput" accept="image/*" style="display:none;" onchange="handleUpload(event)">
                
                <div class="safe-footer">
                    ğŸ”’ ä¿¡æ¯å®‰å…¨ä¿è¯ï¼šä»˜æ¬¾åç«‹å³æ˜¾ç¤ºç½‘ç›˜é“¾æ¥ï¼Œæ— éœ€ç­‰å¾…
                </div>
            </div>
        </div>
    </div>

    <div id="successPage" class="card hidden">
        <div class="success-header">
            <div style="font-size:60px; line-height:1;">âœ…</div>
            <h2 style="color:var(--green-success); margin-top:10px;">æ”¯ä»˜æˆåŠŸ</h2>
            <p style="color:#666; font-size:0.9em;">æ„Ÿè°¢æ”¯æŒï¼Œæ‚¨çš„ä¸“å±èµ„æ–™å·²å‡†å¤‡å°±ç»ª</p>
        </div>

        <div class="delivery-card">
            <div class="delivery-title">ğŸš€ æ‚¨çš„èµ„æ–™é¢†å–æŒ‡å—</div>
            
            <div class="steps-row">
                <div class="step-item">
                    <div class="step-num">1</div><div>ç‚¹å‡»å¤åˆ¶</div><div class="step-arrow">â†’</div>
                </div>
                <div class="step-item">
                    <div class="step-num">2</div><div>æ‰“å¼€ç½‘ç›˜App</div><div class="step-arrow">â†’</div>
                </div>
                <div class="step-item">
                    <div class="step-num">3</div><div>è‡ªåŠ¨è¯†åˆ«</div>
                </div>
            </div>

            <div class="link-info-box">
                <div class="link-row"><span class="link-label">ç½‘ç›˜é“¾æ¥ï¼š</span><span class="link-val" id="panLinkTxt">https://pan.baidu.com/s/1TPexZexAwxC-is2dfD_LeA</span></div>
                <div class="link-row"><span class="link-label">æå–ç ï¼š</span><span class="link-val code-val" id="panCodeTxt">8888</span></div>
            </div>

            <button class="btn-copy-big" id="mainCopyBtn" onclick="copyAllInfo()">ğŸ“‹ ä¸€é”®å¤åˆ¶é“¾æ¥ä¸æå–ç </button>
            <div style="text-align:center; color:#888; font-size:0.85em; margin-top:15px;">æç¤ºï¼šå¤åˆ¶åè¯·æ‰“å¼€ã€Œç™¾åº¦ç½‘ç›˜Appã€å³å¯è‡ªåŠ¨è¯†åˆ«</div>

            <div class="no-app-tip">
                <div class="tip-title">ğŸ’¡ æ²¡æœ‰ç™¾åº¦ç½‘ç›˜APPæ€ä¹ˆåŠï¼Ÿ</div>
                <div class="tip-steps">
                    <span>1. å¤åˆ¶é“¾æ¥å‘é€åˆ°å¾®ä¿¡æ–‡ä»¶åŠ©æ‰‹</span>
                    <span>2. åœ¨å¾®ä¿¡å†…ç‚¹å‡»é“¾æ¥æ³¨å†Œ</span>
                    <span>3. å³å¯ç›´æ¥è½¬å­˜è§‚çœ‹</span>
                </div>
            </div>
        </div>

        <div style="text-align:center; margin-bottom:30px;">
            <h2 style="color:#333; font-size:1.4em;">ğŸ“Š å®Œæ•´ç¤¾ä¼šåŒ–æ·±åº¦åˆ†ææŠ¥å‘Š</h2>
            <div style="font-size:3.5em; color:var(--primary); font-weight:800;" id="finalScore">--</div>
            <div style="color:#666;" id="finalLevel">--</div>
        </div>

        <div style="height:250px; position:relative; width:100%; margin-bottom:30px;">
            <canvas id="finalRadarChart"></canvas>
        </div>

        <div class="report-module">
            <div class="module-title">ğŸ” å…¨ç»´åº¦æ·±åº¦æ‹†è§£</div>
            <div id="fullDimensionAnalysis"></div>
        </div>

        <div class="report-module" style="border-top-color:#2E7D32;">
            <div class="module-title" style="color:#2E7D32;">ğŸ“– æ‰‹å†Œé‡ç‚¹é˜…è¯»æŒ‡å¼•</div>
            <div id="guideContent"></div>
        </div>

        <div class="report-module" style="border-top-color:#D35400;">
            <div class="module-title" style="color:#D35400;">âš ï¸ æ‚¨çš„ä¸“å±é¿å‘æŒ‡å—</div>
            <div id="pitfallGuide"></div>
        </div>

        <div class="cs-footer">
            <p>å¦‚èµ„æ–™é¢†å–æœ‰é—®é¢˜ï¼Œè¯·æ·»åŠ å®¢æœå¾®ä¿¡ï¼š<span class="wx-id">HCH91178</span></p>
            <p style="margin-top:5px;">å¤‡æ³¨ï¼šç¤¾ä¼šåŒ–èµ„æ–™</p>
        </div>
    </div>
    
    <div id="adminPage" class="card hidden">
        <h3>åå°ç®¡ç†</h3>
        <input type="password" id="adminPwd" placeholder="å¯†ç " style="width:100%; padding:10px; margin:10px 0; border:1px solid #ddd; border-radius:8px;">
        <button onclick="checkAdmin()" class="btn-primary" style="font-size:0.9em; padding:10px;">ç™»å½•</button>
        <div id="adminContent" style="margin-top:20px;"></div>
        <button onclick="location.reload()" style="margin-top:20px; border:none; background:none; color:#999; cursor:pointer;">è¿”å›</button>
    </div>

</div>

<script>
    const CONFIG = {
        MASTER_CODE: "GEMINI-MASTER",
        ADMIN_PWD: "admin", 
        SERVER_KEY: "SCT303445TGU9j8Q5VLg6rT7eryLe8L41v",
        PAN_LINK: "https://pan.baidu.com/s/1TPexZexAwxC-is2dfD_LeA",
        PAN_CODE: "8888"
    };

    const questions = [
        {t:"é¢†å¯¼è¯´'çœ‹ç€åŠ'æ—¶ï¼Œæˆ‘èƒ½å¬å‡ºæ˜¯åœ¨æ”¾æƒè¿˜æ˜¯è¯•æ¢", d:0},
        {t:"é¥­å±€ä¸Šèƒ½è¿…é€Ÿåˆ¤æ–­è°æ˜¯æ ¸å¿ƒäººç‰©", d:0},
        {t:"èƒ½å¬æ‡‚æœ‹å‹'éšä¾¿'èƒŒåçš„çœŸå®éœ€æ±‚", d:0},
        {t:"ç»å¸¸æŠŠåˆ«äººçš„å®¢å¥—è¯å½“çœŸ", d:0, r:true},
        {t:"èƒ½é€šè¿‡ç©¿ç€å¤§è‡´åˆ¤æ–­å¯¹æ–¹æ€§æ ¼", d:0},
        {t:"æ°”æ°›å°´å°¬æ—¶æˆ‘æ˜¯æœ€åä¸€ä¸ªå‘ç°çš„", d:0, r:true},
        {t:"èƒ½åˆ†æ¸…'æ”¹å¤©åƒé¥­'æ˜¯å®¢å¥—è¿˜æ˜¯çœŸé‚€", d:0},
        {t:"èƒ½çœ‹æ¸…èŒåœºä¸­è°å’Œè°æ˜¯ä¸€ä¼™çš„", d:0},
        {t:"åˆ«äººæ¬²è¨€åˆæ­¢æ—¶çŸ¥é“è¯¥è¿½é—®è¿˜æ˜¯é—­å˜´", d:0},
        {t:"ä¸æ‡‚ä¸ºä»€ä¹ˆæœ‰äº›äººæ˜æ˜è®¨åŒå¯¹æ–¹è¿˜èƒ½è°ˆç¬‘é£ç”Ÿ", d:0, r:true},
        {t:"çŸ¥é“å¼‚æ€§é—´ä»€ä¹ˆç©ç¬‘ä¸èƒ½å¼€", d:1},
        {t:"çƒ­å¿ƒå¸®å¿™å¸¸è¢«å«Œå¤šç®¡é—²äº‹", d:1, r:true},
        {t:"æ‡‚å¾—ä½“é¢æ‹’ç»æ— ç†è¦æ±‚", d:1},
        {t:"æ·±å¤œç»™ä¸ç†ŸåŒäº‹å‘æ¶ˆæ¯è§‰å¾—æ²¡é—®é¢˜", d:1, r:true},
        {t:"åšå®¢çŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥å‘Šè¾", d:1},
        {t:"ä¸éšæ„æ‰“å¬æœ‹å‹éšç§", d:1},
        {t:"å…¬å…±åœºåˆå¤§å£°æ‰“ç”µè¯äº‹åæ‰è§‰ä¸å¦¥", d:1, r:true},
        {t:"çŸ¥é“å“ªäº›è¯é¢˜æ˜¯èŒåœºç¦å¿Œ", d:1},
        {t:"èƒ½æŠŠæ¡ä¸é¢†å¯¼ç›¸å¤„çš„å°Šå‘åˆ†å¯¸", d:1},
        {t:"å€Ÿæœ‹å‹å°é’±ç»å¸¸å¿˜è®°è¿˜", d:1, r:true},
        {t:"æ€•å¾—ç½ªäººå¸¸åœ¨åˆ©ç›Šä¸Šåƒå“‘å·´äº", d:2, r:true},
        {t:"ä¸çˆ±å å°ä¾¿å®œï¼Œæ‡‚å…è´¹çš„æœ€è´µ", d:2},
        {t:"æ±‚äººåŠäº‹å…ˆæƒ³å¥½èƒ½ç»™å¯¹æ–¹ä»€ä¹ˆä»·å€¼", d:2},
        {t:"è§‰å¾—è°ˆé’±ä¼¤æ„Ÿæƒ…å°½é‡å›é¿", d:2, r:true},
        {t:"å†²çªæ—¶èƒ½æ‰¾åˆ°åŒèµ¢æ–¹æ¡ˆ", d:2},
        {t:"æ‡‚é€ç¤¼çš„è‰ºæœ¯", d:2},
        {t:"æ„¿ä¸ºé•¿æœŸå…³ç³»ç‰ºç‰²çŸ­æœŸåˆ©ç›Š", d:2},
        {t:"å—äººæ©æƒ æ— æ³•å›æŠ¥ä¼šç„¦è™‘", d:2},
        {t:"çŸ¥é“ä½•æ—¶è¯¥è£…å‚»ä¿æŠ¤åˆ©ç›Š", d:2},
        {t:"èƒ½åœ¨å¤æ‚å±€åŠ¿æ‰¾åˆ°æœ‰åˆ©ä½ç½®", d:2},
        {t:"è¢«å½“ä¼—æ‰¹è¯„èƒ½å‹ä½ç«å…ˆè§£å†³é—®é¢˜", d:3},
        {t:"å¿ƒæƒ…ä¸å¥½å¸¸è¿æ€’äº²è¿‘çš„äºº", d:3, r:true},
        {t:"æ„¤æ€’æ—¶èƒ½æ§åˆ¶ä¸è¯´ç‹ è¯", d:3},
        {t:"å¾ˆå®¹æ˜“è¢«åˆ«äººæƒ…ç»ªæ„ŸæŸ“å¸¦è·‘", d:3, r:true},
        {t:"é¢å¯¹æŒ‘è¡…èƒ½ä¿æŒå†·é™", d:3},
        {t:"å†²åŠ¨å†³å®šåç»å¸¸åæ‚”", d:3, r:true},
        {t:"èƒ½æ•é”å¯Ÿè§‰å¹¶æ’è§£è´Ÿé¢æƒ…ç»ª", d:3},
        {t:"é«˜å‹ä¸‹ç»å¸¸å´©æºƒæ— æ³•æ€è€ƒ", d:3, r:true},
        {t:"ä¸ºé¡¾å…¨å¤§å±€èƒ½å¿å—å§”å±ˆ", d:3},
        {t:"æ“…é•¿ç”¨å¹½é»˜åŒ–è§£å°´å°¬", d:3}
    ];

    let state = { qIdx: 0, ans: [], code: '' };

    function startTest() {
        const val = document.getElementById('cardInput').value.trim();
        if(!val) return alert('è¯·è¾“å…¥å¡å·');
        if(val.length < 4) return alert('å¡å·æ ¼å¼ä¸æ­£ç¡®');
        state.code = val;
        document.getElementById('homePage').classList.add('hidden');
        document.getElementById('testPage').classList.remove('hidden');
        renderQ();
    }

    function renderQ() {
        const q = questions[state.qIdx];
        document.getElementById('qText').innerText = `${state.qIdx+1}. ${q.t}`;
        document.getElementById('progressText').innerText = `è¿›åº¦ ${state.qIdx+1}/40`;
        document.getElementById('progressBar').style.width = ((state.qIdx+1)/40*100) + '%';
        document.getElementById('prevBtn').style.visibility = state.qIdx === 0 ? 'hidden' : 'visible';
        let html = '';
        ['éå¸¸ä¸ç¬¦','æ¯”è¾ƒä¸ç¬¦','ä¸ç¡®å®š','æ¯”è¾ƒç¬¦åˆ','éå¸¸ç¬¦åˆ'].forEach((txt, i) => {
            const isSel = state.ans[state.qIdx] === (i+1) ? 'selected' : '';
            html += `<div class="option ${isSel}" onclick="selectOpt(${i+1})">${txt}</div>`;
        });
        document.getElementById('optionsBox').innerHTML = html;
    }

    function selectOpt(val) {
        state.ans[state.qIdx] = val;
        renderQ();
        setTimeout(() => { nextQ(true); }, 300);
    }

    function nextQ(isAuto = false) {
        if(!isAuto && !state.ans[state.qIdx]) return alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªé€‰é¡¹');
        if(isAuto && !state.ans[state.qIdx]) return;
        if(state.qIdx < 39) {
            state.qIdx++; renderQ();
        } else {
            calcResult();
        }
    }

    function prevQ() {
        if(state.qIdx > 0) { state.qIdx--; renderQ(); }
    }

    function generateDetailedAdvice(scores, names, minIdx, maxIdx) {
        const weakName = names[minIdx];
        const weakScore = scores[minIdx];
        const strongName = names[maxIdx];
        const strongScore = scores[maxIdx];
        const weakText = {
            'äººæƒ…æ´å¯Ÿ': 'éš¾ä»¥æ•æ‰ä»–äººè¯è¯­èƒŒåçš„çœŸå®æ„å›¾ï¼Œåœ¨å¤æ‚å±€åŠ¿ä¸­å®¹æ˜“æ»åååº”ï¼Œå¸¸æœ‰â€œåçŸ¥åè§‰â€çš„æ— åŠ›æ„Ÿã€‚',
            'è¾¹ç•ŒæŒæ§': 'å¸¸å› ä¸å–„æ‹’ç»è€ŒèƒŒè´Ÿä¸å±äºè‡ªå·±çš„è´£ä»»ï¼Œå®¹æ˜“é™·å…¥â€œå¥½äººé™·é˜±â€ï¼Œå¯¼è‡´ä¸ªäººç²¾åŠ›è¢«è¿‡åº¦æ¶ˆè€—ã€‚',
            'åˆ©ç›Šå¹³è¡¡': 'å›é¿å†²çªå’Œåšå¼ˆï¼Œå¯¼è‡´åœ¨èµ„æºåˆ†é…ä¸­å¤„äºåŠ£åŠ¿ï¼Œä¸ªäººä»·å€¼è¢«ä½ä¼°ï¼Œè¾›è¾›è‹¦è‹¦å´ä¸ºä»–äººåšå«è¡£ã€‚',
            'æƒ…ç»ªç®¡ç†': 'æ˜“å—ç¯å¢ƒå½±å“ï¼Œå…³é”®æ—¶åˆ»æƒ…ç»ªæ³¢åŠ¨å¯èƒ½å½±å“å†³ç­–åˆ¤æ–­ï¼Œç»™ä»–äººç•™ä¸‹ä¸å¤Ÿç¨³é‡çš„å°è±¡ã€‚'
        };
        return `
            <div class="advice-card strength">
                <div class="advice-tag tag-green">æ‚¨çš„æ ¸å¿ƒä¼˜åŠ¿</div>
                <div class="advice-text">
                    åœ¨ <span class="advice-highlight">ã€${strongName}ã€‘</span> ç»´åº¦è¡¨ç°ä¼˜å¼‚ï¼ˆ${strongScore}åˆ†ï¼‰ã€‚è¿™æ„å‘³ç€åœ¨æ‚¨ç†Ÿæ‚‰çš„ç¤¾äº¤é¢†åŸŸï¼Œæ‚¨å…·å¤‡æå¼ºçš„ç›´è§‰å’ŒæŒæ§åŠ›ï¼Œè¿™æ˜¯æ‚¨çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚
                </div>
            </div>
            <div class="advice-card weakness">
                <div class="advice-tag tag-red">å…³é”®ç“¶é¢ˆ</div>
                <div class="advice-text">
                    æ•°æ®æ— æƒ…åœ°æŒ‡å‡ºï¼Œåˆ¶çº¦æ‚¨ç¤¾äº¤å±‚çº§è·ƒè¿çš„çŸ­æ¿åœ¨äº <span class="advice-highlight">ã€${weakName}ã€‘</span>ï¼ˆä»…${weakScore}åˆ†ï¼‰ã€‚å…·ä½“è¡¨ç°ä¸ºï¼š${weakText[weakName]}
                </div>
            </div>
            <div class="conclusion-box">
                ğŸ’¡ <strong>è¯„ä¼°ç»“è®ºï¼š</strong><br>
                è¿™ç§â€œé•¿æ¿å¾ˆé•¿ã€çŸ­æ¿å¾ˆçŸ­â€çš„ä¸å¹³è¡¡çŠ¶æ€ï¼Œå¾€å¾€ä¼šå¯¼è‡´æ‚¨åœ¨ç¤¾äº¤ä¸­ä»˜å‡ºå·¨å¤§åŠªåŠ›ï¼Œå´éš¾ä»¥è·å¾—å¯¹ç­‰çš„å›æŠ¥ã€‚å¦‚æœä¸ä»æ½œæ„è¯†å±‚é¢ä¿®å¤çŸ­æ¿ï¼Œç±»ä¼¼çš„ç¤¾äº¤å›°å¢ƒå¯èƒ½ä¼šåå¤å‡ºç°ã€‚
            </div>
        `;
    }

    function calcResult() {
        let scores = [0,0,0,0];
        questions.forEach((q,i) => { let v = state.ans[i]; if(q.r) v = 6 - v; scores[q.d] += v; });
        scores = scores.map(s => s * 2);
        const total = Math.round(scores.reduce((a,b)=>a+b,0)/4);
        let level = total>80?'é«˜çº§ç¤¾äº¤è€…':(total>60?'ä¸­çº§ç¤¾äº¤è€…':'ç¤¾äº¤åˆå­¦è€…');

        document.getElementById('testPage').classList.add('hidden');
        document.getElementById('resultPage').classList.remove('hidden');
        document.getElementById('simpleScore').innerText = total;
        document.getElementById('simpleLevel').innerText = level;

        const names = ['äººæƒ…æ´å¯Ÿ','è¾¹ç•ŒæŒæ§','åˆ©ç›Šå¹³è¡¡','æƒ…ç»ªç®¡ç†'];
        const minVal = Math.min(...scores); const minIdx = scores.indexOf(minVal);
        const maxVal = Math.max(...scores); const maxIdx = scores.indexOf(maxVal);

        document.getElementById('detailAdviceContent').innerHTML = generateDetailedAdvice(scores, names, minIdx, maxIdx);

        const personas = ["ã€æ´å¯Ÿè€…ã€‘å¤©ç”Ÿçš„å†›å¸ˆï¼Œèƒ½çœ‹é€äººå¿ƒã€‚","ã€åˆ†å¯¸å¤§å¸ˆã€‘é«˜æƒ…å•†ä»£è¡¨ï¼Œç›¸å¤„èˆ’é€‚ã€‚","ã€ç ´å±€è€…ã€‘æ·±è°™åšå¼ˆï¼Œå–„äºæ•´åˆèµ„æºã€‚","ã€æŒæ§è€…ã€‘é¢†è¢–æ°”è´¨ï¼Œæ³°å±±å´©äºå‰ä¸å˜è‰²ã€‚"];
        document.getElementById('personaText').innerText = personas[maxIdx];

        drawChart('radarChart', scores);
        window.fullReportData = { scores, total, level, minIdx, names };
        window.scrollTo(0,0);
    }

    function drawChart(id, data) {
        const ctx = document.getElementById(id).getContext('2d');
        if(window[id] instanceof Chart) { window[id].destroy(); }
        window[id] = new Chart(ctx, {
            type: 'radar',
            data: {
                labels: ['äººæƒ…æ´å¯Ÿ','è¾¹ç•ŒæŒæ§','åˆ©ç›Šå¹³è¡¡','æƒ…ç»ªç®¡ç†'],
                datasets: [{
                    label: 'å¾—åˆ†', data: data, backgroundColor: 'rgba(139, 110, 78, 0.2)',
                    borderColor: '#8B6E4E', borderWidth: 2, pointBackgroundColor: '#8B6E4E', pointRadius: 3
                }]
            },
            options: {
                responsive: true, maintainAspectRatio: false,
                scales: { r: { min: 0, max: 100, ticks: {display:false}, pointLabels: {font: {size: 12}} } },
                plugins: { legend: {display:false} }
            }
        });
    }

    function scrollToQR() {
        document.querySelector('.qr-section').scrollIntoView({behavior:'smooth'});
    }

    function scrollToPay() { document.getElementById('paySection').scrollIntoView({behavior:'smooth'}); }

    function handleUpload(e) {
        if(e.target.files.length === 0) return;
        document.querySelector('label[for="fileInput"]').innerText = 'â³ æ­£åœ¨éªŒè¯å¹¶ç”Ÿæˆæ·±åº¦æŠ¥å‘Š...';
        fetch(`https://sctapi.ftqq.com/${CONFIG.SERVER_KEY}.send`, {
            method: 'POST', headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ title: 'ğŸ’°æ–°è®¢å•-ç¤¾ä¼šåŒ–æ‰‹å†Œ-19.9', desp: `å¡å·:${state.code}\næ–‡ä»¶:${e.target.files[0].name}` })
        }).catch(()=>{});
        setTimeout(() => { showFullReport(); }, 1500);
    }

    function showFullReport() {
        document.getElementById('resultPage').classList.add('hidden');
        document.getElementById('successPage').classList.remove('hidden');
        
        const d = window.fullReportData;
        document.getElementById('finalScore').innerText = d.total;
        document.getElementById('finalLevel').innerText = d.level;
        drawChart('finalRadarChart', d.scores);

        document.getElementById('panLinkTxt').innerText = CONFIG.PAN_LINK;
        document.getElementById('panCodeTxt').innerText = CONFIG.PAN_CODE;

        const analysisTexts = {
            'äººæƒ…æ´å¯Ÿ': ['æ‚¨åœ¨å¯Ÿè¨€è§‚è‰²æ–¹é¢ç•¥æ˜¾è¿Ÿé’ï¼Œå®¹æ˜“å¿½ç•¥éè¨€è¯­ä¿¡æ¯ã€‚', 'æ‚¨å…·å¤‡åŸºç¡€çš„è§‚å¯ŸåŠ›ï¼Œä½†åœ¨é«˜å‹ç¯å¢ƒä¸‹å¯èƒ½å¤±æ•ˆã€‚', 'æ‚¨æ‹¥æœ‰é¹°ä¸€èˆ¬çš„æ•é”åº¦ï¼Œèƒ½ç¬é—´æ•æ‰ç©ºæ°”ä¸­çš„å¾®å¦™å˜åŒ–ã€‚'],
            'è¾¹ç•ŒæŒæ§': ['æ‚¨ç•Œé™æ¨¡ç³Šï¼Œå¸¸å› è¿‡åº¦çƒ­å¿ƒæˆ–å›é¿è€Œé™·å…¥è¢«åŠ¨ã€‚', 'æ‚¨å¤§ä½“å¾—ä½“ï¼Œä½†åœ¨é¢å¯¹å¼ºåŠ¿å¯¹è±¡æ—¶å®¹æ˜“é€€è®©ã€‚', 'æ‚¨æ·±è°™è¿›é€€ä¹‹é“ï¼Œèƒ½è®©æ¯ä¸ªäººéƒ½æ„Ÿåˆ°èˆ’æœä¸”å°Šé‡ã€‚'],
            'åˆ©ç›Šå¹³è¡¡': ['æ‚¨è§†é‡‘é’±/åˆ©ç›Šä¸ºç•é€”ï¼Œå¸¸åšé›¶å’Œåšå¼ˆçš„ç‰ºç‰²å“ã€‚', 'æ‚¨æ‡‚å¾—äº¤æ¢ï¼Œä½†ç¼ºä¹é•¿æœŸå¸ƒå±€çš„æˆ˜ç•¥çœ¼å…‰ã€‚', 'æ‚¨æ˜¯å¤©ç”Ÿçš„æ“ç›˜æ‰‹ï¼Œæ€»èƒ½æ‰¾åˆ°å¤šæ–¹å…±èµ¢çš„æœ€ä¼˜è§£ã€‚'],
            'æƒ…ç»ªç®¡ç†': ['æ‚¨æ˜¯æƒ…ç»ªçš„å¥´éš¶ï¼Œå–œæ€’å½¢äºè‰²ï¼Œå®¹æ˜“è¢«å¯¹æ‰‹åˆ©ç”¨ã€‚', 'æ‚¨èƒ½æ§åˆ¶è¡¨é¢æƒ…ç»ªï¼Œä½†å†…å¿ƒæ¶ˆè€—å·¨å¤§ã€‚', 'æ‚¨æ‹¥æœ‰æå¼ºçš„é’æ„ŸåŠ›å’Œå®šåŠ›ï¼Œæƒ…ç»ªæ˜¯æ‚¨çš„æ­¦å™¨è€Œéè½¯è‚‹ã€‚']
        };
        let fullHtml = '';
        d.names.forEach((n, i) => {
            const score = d.scores[i];
            let levelIdx = 0; if(score >= 80) levelIdx = 2; else if(score >= 60) levelIdx = 1;
            fullHtml += `
                <div style="margin-bottom:15px;">
                    <div class="dim-row"><span style="font-weight:bold;">${n}</span><span style="color:#8B6E4E;font-weight:bold;">${score}åˆ†</span></div>
                    <div class="dim-bar"><div class="dim-fill" style="width:${score}%"></div></div>
                    <div class="dim-text">${score>80 ? 'ğŸŒŸ è¡¨ç°ä¼˜å¼‚ï¼šæ‚¨åœ¨è¯¥é¢†åŸŸå…·å¤‡æå¼ºçš„ç›´è§‰ã€‚' : (score>60?'âœ¨ è¡¨ç°è‰¯å¥½ï¼šèƒ½åº”ä»˜æ—¥å¸¸ï¼Œä½†é«˜å‹ä¸‹æ˜“å‡ºé”™ã€‚': 'âš ï¸ æ€¥éœ€æå‡ï¼šè¿™æ˜¯æ‚¨çš„æ ¸å¿ƒçŸ­æ¿ï¼Œ'+analysisTexts[n][levelIdx])}</div>
                </div>`;
        });
        document.getElementById('fullDimensionAnalysis').innerHTML = fullHtml;

        const weakName = d.names[d.minIdx];
        const guides = {
            'äººæƒ…æ´å¯Ÿ': '<li><span class="guide-book">ç¬¬äºŒéƒ¨åˆ†</span> ç¬¬ä¸ƒè®²ï¼š5W1HèŠå¤©æ³•ï¼Œè·Ÿè°éƒ½èƒ½èŠå¾—æ¥</li><li><span class="guide-book">ç¬¬å››éƒ¨åˆ†</span> ç¬¬ä¸‰åå…«è¯¾ï¼šæ™®é€šäººæ€ä¹ˆç§¯ç´¯äººè„‰</li>',
            'è¾¹ç•ŒæŒæ§': '<li><span class="guide-book">ç¬¬å…­éƒ¨åˆ†</span> ç¬¬å…­åå››è¯¾ï¼šæ£€æŸ¥è‡ªå·±æœ‰æ²¡æœ‰å»ºç«‹å¥½è¾¹ç•Œæ„Ÿçš„æ¸…å•</li><li><span class="guide-book">ç¬¬å…­éƒ¨åˆ†</span> ç¬¬å…­åäº”è¯¾ï¼šé«˜æƒ…å•†è¯´â€œä¸â€çš„æŠ€å·§</li>',
            'åˆ©ç›Šå¹³è¡¡': '<li><span class="guide-book">ç¬¬å››éƒ¨åˆ†</span> ç¬¬å››åå››è¯¾ï¼šèŠèŠæ€ä¹ˆçœ‹æ¸…ä¸€ä¸ªäººï¼Œé¿å…åƒäº</li><li><span class="guide-book">ç¬¬ä¸‰éƒ¨åˆ†</span> ç¬¬äºŒåå…«è¯¾ï¼šåŒäº‹æ¨å¸è´£ä»»ç»™ä½ æ€ä¹ˆåŠ</li>',
            'æƒ…ç»ªç®¡ç†': '<li><span class="guide-book">ç¬¬äº”éƒ¨åˆ†</span> ç¬¬äº”åä¸€è¯¾ï¼šè®²åˆ«å¤ªåœ¨æ„åˆ«äººæ€ä¹ˆçœ‹ä½ </li><li><span class="guide-book">ç¬¬äº”éƒ¨åˆ†</span> ç¬¬äº”åä¸ƒè¯¾ï¼šæ€ä¹ˆå¿«é€Ÿæ‰¾å›è‡ªä¿¡ã€åœæ­¢è‡ªæˆ‘æ¶ˆè€—</li>'
        };
        document.getElementById('guideContent').innerHTML = `<p style="margin-bottom:10px;">é’ˆå¯¹æ‚¨ã€${weakName}ã€‘è–„å¼±é¡¹ï¼Œå»ºè®®ä¼˜å…ˆé˜…è¯»æ‰‹å†Œä»¥ä¸‹ç« èŠ‚ï¼š</p><ul class="guide-list">${guides[weakName]}</ul>`;

        const pitfalls = {
            'äººæƒ…æ´å¯Ÿ': 'åˆ‡å¿Œåœ¨æœªæ‘¸æ¸…å±€åŠ¿å‰è½»æ˜“è¡¨æ€ï¼Œç‰¹åˆ«æ˜¯æ¶‰åŠç«™é˜Ÿé—®é¢˜æ—¶ã€‚å¤šå¬å°‘è¯´ï¼Œå…ˆè§‚å¯Ÿåˆ«äººçš„ååº”ã€‚',
            'è¾¹ç•ŒæŒæ§': 'è­¦æƒ•é‚£äº›åˆæ¬¡è§é¢å°±å¯¹æ‚¨è¿‡åº¦çƒ­æƒ…æˆ–æå‡ºè¶Šç•Œè¦æ±‚çš„äººã€‚å­¦ä¼šæ¸©æŸ”è€Œåšå®šåœ°æ‹’ç»ã€‚',
            'åˆ©ç›Šå¹³è¡¡': 'ä¸è¦å› ä¸ºâ€œé¢å­â€è€Œæ‹’ç»è°ˆé’±ï¼Œæ‰€æœ‰ä¸è°ˆåˆ©ç›Šçš„åˆä½œéƒ½æ˜¯è€æµæ°“ã€‚å…ˆå°äººåå›å­ã€‚',
            'æƒ…ç»ªç®¡ç†': 'ä¸è¦åœ¨æ·±å¤œæˆ–æƒ…ç»ªæ¿€åŠ¨æ—¶åšä»»ä½•å†³å®šï¼Œå¤§æ¦‚ç‡ä¼šåæ‚”ã€‚ç»™è‡ªå·±è®¾ç½®ä¸€ä¸ªå†·é™æœŸã€‚'
        };
        document.getElementById('pitfallGuide').innerHTML = `<div class="pitfall-card"><div class="pitfall-head">ğŸš« æ‚¨çš„ä¸“å±é¿é›·é’ˆ</div><div class="pitfall-body">${pitfalls[weakName]}</div></div>`;

        window.scrollTo(0,0);
    }

    function copyAllInfo() {
        const textToCopy = `é“¾æ¥: ${CONFIG.PAN_LINK} æå–ç : ${CONFIG.PAN_CODE}`;
        navigator.clipboard.writeText(textToCopy).then(() => {
            const btn = document.getElementById('mainCopyBtn');
            const originalText = btn.innerHTML;
            btn.innerHTML = 'âœ… å·²å¤åˆ¶ï¼è¯·æ‰“å¼€ç½‘ç›˜App';
            btn.style.background = '#2E7D32';
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.style.background = '#2E7D32';
            }, 3000);
        }).catch(() => alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶'));
    }

    function copyTxt(t) { navigator.clipboard.writeText(t).then(()=>alert('å¤åˆ¶æˆåŠŸ')).catch(()=>alert('å¤åˆ¶å¤±è´¥')); }
    function showAdmin() { document.getElementById('homePage').classList.add('hidden'); document.getElementById('adminPage').classList.remove('hidden'); }
    function checkAdmin() {
        if(document.getElementById('adminPwd').value === CONFIG.ADMIN_PWD) { document.getElementById('adminContent').innerHTML = '<div style="color:green">ç™»å½•æˆåŠŸï¼Œè¯·å‰å¾€Serveré…±æŸ¥çœ‹è®¢å•æ•°æ®ã€‚</div>'; }
        else { alert('å¯†ç é”™è¯¯'); }
    }
</script>
</body>
</html>
